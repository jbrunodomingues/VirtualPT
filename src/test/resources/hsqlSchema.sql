CREATE TABLE PERSON (
  ID_PERSON  INTEGER GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1
  INCREMENT BY 1 )       NOT NULL,
  FIRST_NAME VARCHAR(50) NOT NULL,
  LAST_NAME  VARCHAR(50) NOT NULL,
  PRIMARY KEY (ID_PERSON)
);

CREATE TABLE CLIENT (
  ID_PERSON INT NOT NULL,
  PRIMARY KEY (ID_PERSON),
  CONSTRAINT FK_CLIENT_1 FOREIGN KEY (ID_PERSON) REFERENCES PERSON (ID_PERSON)
);

CREATE TABLE PERSONAL_TRAINER (
  ID_PERSON INT NOT NULL,
  PRIMARY KEY (ID_PERSON),
  CONSTRAINT FK_PERSONAL_TRAINER_1 FOREIGN KEY (ID_PERSON) REFERENCES PERSON (ID_PERSON)
);

CREATE TABLE PT_CLIENT_ASSOCIATION (
  ID_PT_CLIENT_ASSOCIATION INTEGER GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1
  INCREMENT BY 1 )             NOT NULL,
  REFID_PERSONAL_TRAINER   INT NOT NULL,
  REFID_CLIENT             INT NOT NULL,
  PRIMARY KEY (ID_PT_CLIENT_ASSOCIATION),
  CONSTRAINT FK_PT_CLIENT_ASSOCIATION_1 FOREIGN KEY (REFID_PERSONAL_TRAINER) REFERENCES PERSONAL_TRAINER (ID_PERSON),
  CONSTRAINT FK_PT_CLIENT_ASSOCIATION_2 FOREIGN KEY (REFID_CLIENT) REFERENCES CLIENT (ID_PERSON)
);

CREATE TABLE USER (
  ID_USER  INTEGER GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1
  INCREMENT BY 1 )             NOT NULL,
  USERNAME VARCHAR(50)         NOT NULL,
  PASSWORD VARCHAR(50)         NOT NULL,
  PRIMARY KEY (ID_USER)
);

CREATE TABLE ROLE (
  ID_ROLE    INTEGER GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1
  INCREMENT BY 1 )             NOT NULL,
  ROLE_NAME       VARCHAR(20)       NOT NULL,
  REFID_USER INT               NOT NULL,
  PRIMARY KEY (ID_ROLE),
  CONSTRAINT FK_ROLE_1 FOREIGN KEY (REFID_USER) REFERENCES USER (ID_USER)
);